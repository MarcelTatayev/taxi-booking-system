<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marcel's Taxi - Settings</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="version" content="2.1-settings-only">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .admin-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            grid-template-rows: auto 1fr;
            min-height: 100vh;
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 50px rgba(0,0,0,0.1);
        }

        .admin-header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-nav {
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
            overflow-y: auto;
        }

        .nav-header {
            padding: 25px 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .nav-item {
            margin-bottom: 2px;
        }

        .nav-link {
            display: block;
            padding: 12px 20px;
            color: #495057;
            text-decoration: none;
            border-radius: 0 25px 25px 0;
            margin-right: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #e9ecef;
            color: #007bff;
        }

        .nav-link.active {
            background: #007bff;
            color: white;
        }

        .nav-submenu {
            display: none;
            margin-left: 20px;
            margin-bottom: 10px;
        }

        .nav-submenu .nav-link {
            padding: 8px 20px;
            font-size: 14px;
            opacity: 0.8;
        }

        .admin-main {
            padding: 30px;
            background: #f8f9fa;
            overflow-y: auto;
        }

        .content-section {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
        }

        .content-section.active {
            display: block;
        }

        .content-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .input-field, .textarea-field, .select-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-field:focus, .textarea-field:focus, .select-field:focus {
            outline: none;
            border-color: #007bff;
        }

        .textarea-field {
            min-height: 120px;
            resize: vertical;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .settings-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }

        .settings-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .price-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .price-input-group label {
            min-width: 150px;
            font-weight: 500;
        }

        .price-input-group input {
            flex: 1;
            max-width: 120px;
        }

        .currency-symbol {
            font-weight: bold;
            color: #007bff;
        }

        .surcharge-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .surcharge-item h4 {
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .surcharge-item p {
            color: #6c757d;
            font-size: 14px;
            margin: 0;
        }

        .template-preview {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
        }

        .template-preview h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .notification {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .notification.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .notification.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-active { background: #28a745; }
        .status-inactive { background: #dc3545; }
        .status-pending { background: #ffc107; }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <div class="admin-header">
            <div>
                <h1 style="font-size: 24px; margin-bottom: 5px;">Marcel's Taxi Pro - Settings</h1>
                <p style="opacity: 0.8; margin: 0;">System Configuration & Email Templates</p>
            </div>
            <div style="display: flex; gap: 15px; align-items: center;">
            </div>
        </div>

        <!-- Navigation -->
        <div class="admin-nav">
            <div class="nav-header">
                <h3 style="color: #495057; margin-bottom: 15px;">Settings</h3>
            </div>

            <!-- <div class="nav-item">
                <a class="nav-link" onclick="showSection('vehicle-manager')">üöó Vehicle Manager</a>
            </div> -->
            <!-- <div class="nav-item">
                <a class="nav-link" onclick="showSection('email-templates')">üìß Email Templates</a>
            </div>
            <div class="nav-item">
                <a class="nav-link" onclick="showSection('meet-and-greet')">ü§ù Meet & Greet</a>
            </div>
            <div class="nav-item">
                <a class="nav-link" onclick="showSection('item-surcharge')">üí∞ Item Surcharge</a>
            </div>
            <div class="nav-item">
                <a class="nav-link" onclick="showSection('holiday-surcharge')">üéÑ Holiday Surcharge</a>
            </div>
            <div class="nav-item">
                <a class="nav-link" onclick="showSection('night-surcharge')">üåô Night Surcharge</a>
            </div>
            <div class="nav-item">
                <a class="nav-link" onclick="showSection('location-surcharge')">üìç Location Surcharge</a>
            </div>
            <div class="nav-item">
                <a class="nav-link" onclick="showSection('email-config')">‚öôÔ∏è Email Configuration</a>
            </div>
            <div class="nav-item">
                <a class="nav-link" onclick="showSection('system-defaults')">üîß System Defaults</a>
            </div> -->
        </div>

        <!-- Main Content -->
        <div class="admin-main">
            <div id="notification" class="notification"></div>

            <!-- ALL SECTIONS DISABLED
            Email Templates Section 
            <div id="email-templates-section" class="content-section active">
                <h2>üìß Email Templates</h2>
                <p>Configure email templates for customer communications</p>

                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>Booking Confirmation Template</h3>
                        <div class="form-group">
                            <label class="form-label">Subject Line</label>
                            <input type="text" id="confirmationSubject" class="input-field" value="Booking Confirmation - Marcel's Taxi">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email Body</label>
                            <textarea id="confirmationBody" class="textarea-field" rows="8">Dear {{customerName}},

Thank you for booking with Marcel's Taxi!

Booking Details:
- Booking ID: {{bookingId}}
- Date & Time: {{travelDate}} at {{travelTime}}
- From: {{fromLocation}}
- To: {{toLocation}}
- Vehicle: {{vehicleType}}
- Total Price: ‚Ç¨{{totalPrice}}

We will contact you 15 minutes before pickup.

Best regards,
Marcel's Taxi Team</textarea>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h3>Reminder Email Template</h3>
                        <div class="form-group">
                            <label class="form-label">Subject Line</label>
                            <input type="text" id="reminderSubject" class="input-field" value="Trip Reminder - Marcel's Taxi">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email Body</label>
                            <textarea id="reminderBody" class="textarea-field" rows="8">Dear {{customerName}},

This is a reminder for your upcoming trip:

- Date & Time: {{travelDate}} at {{travelTime}}
- Pickup Location: {{fromLocation}}
- Destination: {{toLocation}}
- Vehicle: {{vehicleType}}

Your driver will contact you 15 minutes before pickup.

Safe travels!
Marcel's Taxi Team</textarea>
                        </div>
                    </div>
                </div>

                <button onclick="saveEmailTemplates()" class="btn btn-primary">Save Templates</button>
            </div>

            <!-- Meet & Greet Section -->
            <div id="meet-and-greet-section" class="content-section">
                <h2>ü§ù Meet & Greet Settings</h2>
                <p>Configure meet and greet service options and pricing</p>

                <div class="settings-card">
                    <h3>Meet & Greet Configuration</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Service Description</label>
                        <textarea id="meetGreetDescription" class="textarea-field">Professional driver will meet you at arrivals with name sign and assist with luggage</textarea>
                    </div>

                    <div class="price-input-group">
                        <label>Airport Pickup Surcharge:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="meetGreetAirportPrice" class="input-field" value="15.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>Train Station Pickup:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="meetGreetStationPrice" class="input-field" value="10.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>Hotel/Other Location:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="meetGreetOtherPrice" class="input-field" value="8.00" step="0.01">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="meetGreetEnabled" checked> Enable Meet & Greet Service
                        </label>
                    </div>

                    <button onclick="saveMeetGreetSettings()" class="btn btn-primary">Save Settings</button>
                </div>
            </div>

            <!-- Item Surcharge Section -->
            <div id="item-surcharge-section" class="content-section">
                <h2>üí∞ Item Surcharge</h2>
                <p>Configure additional item surcharges for booking extras</p>

                <!-- Fixed Items -->
                <div class="settings-card">
                    <h3>Fixed Items</h3>
                    <div id="fixedItems">
                        <div class="surcharge-item">
                            <div>
                                <h4>Child Seat</h4>
                                <p>Safety seat for children 1-4 years</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="childSeatPrice" value="5.00" step="0.01" class="input-field">
                            </div>
                        </div>

                        <div class="surcharge-item">
                            <div>
                                <h4>Booster Seat</h4>
                                <p>Booster seat for children 4-8 years</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="boosterSeatPrice" value="5.00" step="0.01" class="input-field">
                            </div>
                        </div>

                        <div class="surcharge-item">
                            <div>
                                <h4>Infant Seat</h4>
                                <p>Car seat for babies 0-1 year</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="infantSeatPrice" value="7.00" step="0.01" class="input-field">
                            </div>
                        </div>

                        <div class="surcharge-item">
                            <div>
                                <h4>Meet & Greet</h4>
                                <p>Driver meets with name sign</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="meetGreetPrice" value="15.00" step="0.01" class="input-field">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Items -->
                <div class="settings-card">
                    <h3>Additional Items</h3>
                    <div id="additionalItems">
                        <div class="surcharge-item">
                            <div>
                                <h4>Golf Material Transport</h4>
                                <p>Transport golf clubs and equipment</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="golfMaterialPrice" value="10.00" step="0.01" class="input-field">
                            </div>
                        </div>

                        <div class="surcharge-item">
                            <div>
                                <h4>Ski Material Transport</h4>
                                <p>Transport ski equipment</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="skiMaterialPrice" value="10.00" step="0.01" class="input-field">
                            </div>
                        </div>

                        <div class="surcharge-item">
                            <div>
                                <h4>Pet Transport</h4>
                                <p>Transport small pets</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="dogPrice" value="15.00" step="0.01" class="input-field">
                            </div>
                        </div>

                        <div class="surcharge-item">
                            <div>
                                <h4>Extra Waiting Time</h4>
                                <p>Additional waiting beyond free time</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="waitingTimePrice" value="0.75" step="0.01" class="input-field">
                                <span>/min</span>
                            </div>
                        </div>

                        <div class="surcharge-item">
                            <div>
                                <h4>Stopover</h4>
                                <p>Additional stop during journey</p>
                            </div>
                            <div class="price-input-group">
                                <span class="currency-symbol">‚Ç¨</span>
                                <input type="number" id="stopoverPrice" value="5.00" step="0.01" class="input-field">
                            </div>
                        </div>
                    </div>
                </div>

                <button onclick="saveItemSurcharges()" class="btn btn-primary">Save Item Surcharges</button>
            </div>

            <!-- Holiday Surcharge Section -->
            <div id="holiday-surcharge-section" class="content-section">
                <h2>üéÑ Holiday Surcharge</h2>
                <p>Configure surcharges for holidays and special events</p>

                <div class="settings-card">
                    <h3>Holiday Configuration</h3>
                    
                    <div class="price-input-group">
                        <label>New Year's Eve/Day Surcharge:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="newYearSurcharge" class="input-field" value="25.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>Christmas Surcharge:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="christmasSurcharge" class="input-field" value="20.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>King's Day Surcharge:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="kingsDaySurcharge" class="input-field" value="15.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>Major Events Surcharge:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="eventsSurcharge" class="input-field" value="10.00" step="0.01">
                    </div>

                    <button onclick="saveHolidaySurcharges()" class="btn btn-primary">Save Holiday Settings</button>
                </div>
            </div>

            <!-- Night Surcharge Section -->
            <div id="night-surcharge-section" class="content-section">
                <h2>üåô Night Surcharge</h2>
                <p>Configure surcharges for night-time trips</p>

                <div class="settings-card">
                    <h3>Night Time Configuration</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Night Surcharge Start Time</label>
                        <input type="time" id="nightStart" class="input-field" value="22:00">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Night Surcharge End Time</label>
                        <input type="time" id="nightEnd" class="input-field" value="06:00">
                    </div>

                    <div class="price-input-group">
                        <label>Night Surcharge Amount:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="nightSurcharge" class="input-field" value="5.00" step="0.01">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="nightSurchargeEnabled" checked> Enable Night Surcharge
                        </label>
                    </div>

                    <button onclick="saveNightSurcharge()" class="btn btn-primary">Save Night Settings</button>
                </div>
            </div>

            <!-- Location Surcharge Section -->
            <div id="location-surcharge-section" class="content-section">
                <h2>üìç Location Surcharge</h2>
                <p>Configure surcharges for specific pickup/dropoff locations</p>

                <div class="settings-card">
                    <h3>Airport Surcharges</h3>
                    
                    <div class="price-input-group">
                        <label>Schiphol Airport:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="schipholSurcharge" class="input-field" value="15.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>Rotterdam Airport:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="rotterdamAirportSurcharge" class="input-field" value="10.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>Eindhoven Airport:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="eindhovenAirportSurcharge" class="input-field" value="10.00" step="0.01">
                    </div>
                </div>

                <div class="settings-card">
                    <h3>Other Location Surcharges</h3>
                    
                    <div class="price-input-group">
                        <label>Central Station:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="centralStationSurcharge" class="input-field" value="5.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>Hospital/Medical:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="hospitalSurcharge" class="input-field" value="3.00" step="0.01">
                    </div>

                    <div class="price-input-group">
                        <label>Event Venues:</label>
                        <span class="currency-symbol">‚Ç¨</span>
                        <input type="number" id="eventVenueSurcharge" class="input-field" value="8.00" step="0.01">
                    </div>
                </div>

                <button onclick="saveLocationSurcharges()" class="btn btn-primary">Save Location Settings</button>
            </div>

            <!-- Email Configuration Section -->
            <div id="email-config-section" class="content-section">
                <h2>‚öôÔ∏è Email Configuration</h2>
                <p>Configure SMTP settings for sending emails</p>

                <div class="settings-card">
                    <h3>SMTP Settings</h3>
                    
                    <div class="form-group">
                        <label class="form-label">SMTP Host</label>
                        <input type="text" id="smtpHost" class="input-field" placeholder="smtp.gmail.com">
                    </div>

                    <div class="form-group">
                        <label class="form-label">SMTP Port</label>
                        <input type="number" id="smtpPort" class="input-field" value="587">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" id="smtpEmail" class="input-field" placeholder="booking@marcelstaxi.nl">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Email Password</label>
                        <input type="password" id="smtpPassword" class="input-field">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="smtpSecure" checked> Use SSL/TLS
                        </label>
                    </div>

                    <button onclick="saveEmailConfig()" class="btn btn-primary">Save Email Config</button>
                    <button onclick="testEmailConnection()" class="btn btn-success">Test Connection</button>
                </div>
            </div>

            <!-- System Defaults Section -->
            <div id="system-defaults-section" class="content-section">
                <h2>üîß System Defaults</h2>
                <p>Configure default system settings and behaviors</p>

                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>Booking Defaults</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Default Advance Booking Hours</label>
                            <input type="number" id="defaultAdvanceHours" class="input-field" value="2">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Free Waiting Time (minutes)</label>
                            <input type="number" id="freeWaitingTime" class="input-field" value="15">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Maximum Passengers (default vehicle)</label>
                            <input type="number" id="defaultMaxPassengers" class="input-field" value="4">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="requireAdvanceBooking" checked> Require Advance Booking
                            </label>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h3>Communication Defaults</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Company Name</label>
                            <input type="text" id="companyName" class="input-field" value="Marcel's Taxi">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Contact Phone</label>
                            <input type="tel" id="companyPhone" class="input-field" value="+31 6 12345678">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Contact Email</label>
                            <input type="email" id="companyEmail" class="input-field" value="info@marcelstaxi.nl">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="sendConfirmationEmails" checked> Send Confirmation Emails
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="sendReminderEmails" checked> Send Reminder Emails
                            </label>
                        </div>
                    </div>
                </div>

                <button onclick="saveSystemDefaults()" class="btn btn-primary">Save System Defaults</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize settings on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadAllSettings();
            showSection('email-templates');
        });

        // Navigation function
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Remove active class from all nav links
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
            });

            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // Add active class to clicked nav link
            event.target.classList.add('active');
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Save email templates
        function saveEmailTemplates() {
            const templates = {
                confirmation: {
                    subject: document.getElementById('confirmationSubject').value,
                    body: document.getElementById('confirmationBody').value
                },
                reminder: {
                    subject: document.getElementById('reminderSubject').value,
                    body: document.getElementById('reminderBody').value
                }
            };

            localStorage.setItem('emailTemplates', JSON.stringify(templates));
            showNotification('Email templates saved successfully!');
        }

        // Save meet & greet settings
        function saveMeetGreetSettings() {
            const settings = {
                description: document.getElementById('meetGreetDescription').value,
                airportPrice: parseFloat(document.getElementById('meetGreetAirportPrice').value),
                stationPrice: parseFloat(document.getElementById('meetGreetStationPrice').value),
                otherPrice: parseFloat(document.getElementById('meetGreetOtherPrice').value),
                enabled: document.getElementById('meetGreetEnabled').checked
            };

            localStorage.setItem('meetGreetSettings', JSON.stringify(settings));
            showNotification('Meet & Greet settings saved successfully!');
        }

        // Save item surcharges
        function saveItemSurcharges() {
            const surcharges = {
                childSeat: parseFloat(document.getElementById('childSeatPrice').value),
                boosterSeat: parseFloat(document.getElementById('boosterSeatPrice').value),
                infantSeat: parseFloat(document.getElementById('infantSeatPrice').value),
                meetGreet: parseFloat(document.getElementById('meetGreetPrice').value),
                golfMaterial: parseFloat(document.getElementById('golfMaterialPrice').value),
                skiMaterial: parseFloat(document.getElementById('skiMaterialPrice').value),
                dog: parseFloat(document.getElementById('dogPrice').value),
                waitingTime: parseFloat(document.getElementById('waitingTimePrice').value),
                stopover: parseFloat(document.getElementById('stopoverPrice').value)
            };

            localStorage.setItem('itemSurcharges', JSON.stringify(surcharges));
            showNotification('Item surcharges saved successfully!');
        }

        // Save holiday surcharges
        function saveHolidaySurcharges() {
            const surcharges = {
                newYear: parseFloat(document.getElementById('newYearSurcharge').value),
                christmas: parseFloat(document.getElementById('christmasSurcharge').value),
                kingsDay: parseFloat(document.getElementById('kingsDaySurcharge').value),
                events: parseFloat(document.getElementById('eventsSurcharge').value)
            };

            localStorage.setItem('holidaySurcharges', JSON.stringify(surcharges));
            showNotification('Holiday surcharges saved successfully!');
        }

        // Save night surcharge
        function saveNightSurcharge() {
            const settings = {
                startTime: document.getElementById('nightStart').value,
                endTime: document.getElementById('nightEnd').value,
                amount: parseFloat(document.getElementById('nightSurcharge').value),
                enabled: document.getElementById('nightSurchargeEnabled').checked
            };

            localStorage.setItem('nightSurchargeSettings', JSON.stringify(settings));
            showNotification('Night surcharge settings saved successfully!');
        }

        // Save location surcharges
        function saveLocationSurcharges() {
            const surcharges = {
                schiphol: parseFloat(document.getElementById('schipholSurcharge').value),
                rotterdamAirport: parseFloat(document.getElementById('rotterdamAirportSurcharge').value),
                eindhovenAirport: parseFloat(document.getElementById('eindhovenAirportSurcharge').value),
                centralStation: parseFloat(document.getElementById('centralStationSurcharge').value),
                hospital: parseFloat(document.getElementById('hospitalSurcharge').value),
                eventVenue: parseFloat(document.getElementById('eventVenueSurcharge').value)
            };

            localStorage.setItem('locationSurcharges', JSON.stringify(surcharges));
            showNotification('Location surcharges saved successfully!');
        }

        // Save email configuration
        function saveEmailConfig() {
            const config = {
                host: document.getElementById('smtpHost').value,
                port: parseInt(document.getElementById('smtpPort').value),
                email: document.getElementById('smtpEmail').value,
                password: document.getElementById('smtpPassword').value,
                secure: document.getElementById('smtpSecure').checked
            };

            localStorage.setItem('emailConfig', JSON.stringify(config));
            showNotification('Email configuration saved successfully!');
        }

        // Test email connection
        function testEmailConnection() {
            // In a real implementation, this would test the SMTP connection
            showNotification('Email connection test would be performed here', 'success');
        }

        // Save system defaults
        function saveSystemDefaults() {
            const defaults = {
                advanceHours: parseInt(document.getElementById('defaultAdvanceHours').value),
                freeWaitingTime: parseInt(document.getElementById('freeWaitingTime').value),
                maxPassengers: parseInt(document.getElementById('defaultMaxPassengers').value),
                requireAdvanceBooking: document.getElementById('requireAdvanceBooking').checked,
                companyName: document.getElementById('companyName').value,
                companyPhone: document.getElementById('companyPhone').value,
                companyEmail: document.getElementById('companyEmail').value,
                sendConfirmationEmails: document.getElementById('sendConfirmationEmails').checked,
                sendReminderEmails: document.getElementById('sendReminderEmails').checked
            };

            localStorage.setItem('systemDefaults', JSON.stringify(defaults));
            showNotification('System defaults saved successfully!');
        }

        // Load all settings from localStorage
        function loadAllSettings() {
            // Load email templates
            const templates = JSON.parse(localStorage.getItem('emailTemplates') || '{}');
            if (templates.confirmation) {
                document.getElementById('confirmationSubject').value = templates.confirmation.subject || '';
                document.getElementById('confirmationBody').value = templates.confirmation.body || '';
            }
            if (templates.reminder) {
                document.getElementById('reminderSubject').value = templates.reminder.subject || '';
                document.getElementById('reminderBody').value = templates.reminder.body || '';
            }

            // Load meet & greet settings
            const meetGreetSettings = JSON.parse(localStorage.getItem('meetGreetSettings') || '{}');
            if (meetGreetSettings.description) {
                document.getElementById('meetGreetDescription').value = meetGreetSettings.description;
            }
            if (meetGreetSettings.airportPrice !== undefined) {
                document.getElementById('meetGreetAirportPrice').value = meetGreetSettings.airportPrice;
            }
            if (meetGreetSettings.stationPrice !== undefined) {
                document.getElementById('meetGreetStationPrice').value = meetGreetSettings.stationPrice;
            }
            if (meetGreetSettings.otherPrice !== undefined) {
                document.getElementById('meetGreetOtherPrice').value = meetGreetSettings.otherPrice;
            }
            if (meetGreetSettings.enabled !== undefined) {
                document.getElementById('meetGreetEnabled').checked = meetGreetSettings.enabled;
            }

            // Load item surcharges
            const itemSurcharges = JSON.parse(localStorage.getItem('itemSurcharges') || '{}');
            Object.keys(itemSurcharges).forEach(key => {
                const element = document.getElementById(key + 'Price');
                if (element && itemSurcharges[key] !== undefined) {
                    element.value = itemSurcharges[key];
                }
            });

            // Load other settings similarly...
            const holidaySurcharges = JSON.parse(localStorage.getItem('holidaySurcharges') || '{}');
            const nightSettings = JSON.parse(localStorage.getItem('nightSurchargeSettings') || '{}');
            const locationSurcharges = JSON.parse(localStorage.getItem('locationSurcharges') || '{}');
            const emailConfig = JSON.parse(localStorage.getItem('emailConfig') || '{}');
            const systemDefaults = JSON.parse(localStorage.getItem('systemDefaults') || '{}');

            // Apply loaded settings to form fields
            loadFormValues(holidaySurcharges, 'Surcharge');
            loadFormValues(nightSettings, '');
            loadFormValues(locationSurcharges, 'Surcharge');
            loadFormValues(emailConfig, '');
            loadFormValues(systemDefaults, '');
        }

        // Helper function to load form values
        function loadFormValues(data, suffix = '') {
            Object.keys(data).forEach(key => {
                const elementId = key + suffix;
                const element = document.getElementById(elementId);
                if (element) {
                    if (element.type === 'checkbox') {
                        element.checked = data[key];
                    } else {
                        element.value = data[key];
                    }
                }
            });
        }

        // Make sure item surcharges are synced with the booking system
        window.addEventListener('storage', function(e) {
            if (e.key === 'itemSurcharges') {
                loadAllSettings();
            }
        });
        END ALL SECTIONS DISABLED -->
    </script>
</body>
</html>